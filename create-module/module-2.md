# Создание модуля
Создание модуля Битрикс.  
https://falbar.ru/article/pishem-pervyj-modul-dlya-1s-bitriks-s-ispolzovaniem-yadra-d7  


- `local/modules/damir.buttonup`
  - install/ - набор скриптов для установки и удаления модуля
    - assets/ - файлы JavaScript и CSS, подключаемые в пользовательской части
      - scripts/
        - jquery.min.js
        - script.js
        - script.min.js
      - styles/
        - style.css
        - style.min.css
    - index.php - описание модуля, реализизация его установки и удаления
    - step.php - шаг(и) установки (необязательный)
    - unset.php - шаг(и) удаления (необязательный)
    - version.php - версия и дата обновления модуля
  - lang/ - набор языковых файлов
    - en/
      - install/
        - index.php
        - step.php
        - unstep.php
      - options.php
    - ru/
      - install/
        - index.php
        - step.php
        - unstep.php
      - options.php
  - lib/ - набор файлов в которых реализуется логика решения
    - Main.php - интерфейс модуля для админки
  - include.php - файл, подключаемый при вызове модуля в коде (его мы использовать не будем и оставим пустым)
  - options.php - страница настроек, подключаемая в административной части.

## install/ установка и удаление модуля

### install/version.php

    <?php
    $arModuleVersion = array(
      "VERSION"      => "1.0.0", // Версия модуля
      "VERSION_DATE" => "2023-09-20 20:00:00" // Время обновления модуля
    );


### install/index.php

### install/step.php

### install/unstep.php

## lang/ языковые файлы

## lang/ru/install/index.php
После написания кода подгрузки языковых файлов, имя и описание модуля появится в админке: `Маркетплейс > Установленные решения`

    <?php
    $MESS["DAMIR_BUTTONUP_NAME"]         = "Кнопка наверх";
    $MESS["DAMIR_BUTTONUP_DESCRIPTION"]  = "Добавляет кнопку наверх на сайт.";
    $MESS["DAMIR_BUTTONUP_PARTNER_NAME"] = "damir";
    $MESS["DAMIR_BUTTONUP_PARTNER_URI"]  = "https://damir.ru/";

## options.php
`Настройки > Настройки продукта > Настройки модулей > Кнопка наверх`  

Вот мы и закончили со страницей настроек, теперь нам осталось подкинуть их в пользовательскую часть и обработать на стороне клиента.

## include.php
Чтобы Битрикс увидел класс `Damir\Buttonup\Main`, загружаем его в файле `include.php`:

## Скрипты и стиля
Подключаем скрипты и стили кнопки, передаем настройки на страницу пользователя.

Тут могут быть разные пути для решения этой задачи. В самом начале статьи, когда мы описывали код установки модуля, мы привязались к событию перед отрисовкой страницы и указали метод `appendScriptsToPage()` класса `Main` как обработчик. Теперь нам его нужно написать:

    code Main.php

В методе мы определили, что он будет отрабатывать только на стороне клиента. Далее сформировали HTML код с набором настроек в json формате для удобства и добавили его в HEAD документа. В конце подключили скрипты и стили нашего Битрикс модуля кнопка наверх.

